
> speed-date@0.1.0 test
> playwright test tests/load-test-50males-20females.spec.ts

[dotenv@17.2.3] injecting env (6) from .env.local -- tip: âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }

Running 1 test using 1 worker
[dotenv@17.2.3] injecting env (0) from .env.local -- tip: ğŸ“¡ add observability to secrets: https://dotenvx.com/ops
(node:96250) Warning: The 'NO_COLOR' env is ignored due to the 'FORCE_COLOR' env being set.
(Use `node --trace-warnings ...` to show where the warning was created)
ğŸŒ Testing against: https://speed-silk.vercel.app
ğŸ‘¤ Creating 1 male users via backend...
âœ… All 1 male users created
ğŸ‘¤ Creating 1 female users via backend...
âœ… All 1 female users created
ğŸŒ Opening browser contexts for all users...
âœ… Created 2 browser contexts
ğŸ” Signing in all users (batched to avoid server overload)...
  Signing in batch 1/1 (2 users)...
  âœ… Batch 1 complete: 2/2 users signed in
âœ… Sign-in complete: 2/2 users successfully signed in
ğŸ° 2 users clicking Start Spin (in batches)...
  Batch 1/1: 2 users clicking Start Spin...
  âœ… Batch 1 complete
âœ… 2 users clicked Start Spin
â³ Waiting for matches to occur (45 seconds)...
ğŸ“Š Checking match status for all signed-in users...

ğŸ—³ï¸ Testing voting flow: One user votes "pass" (respin), other votes "yes"...
  Found match 3b38cb3d-da08-4c4c-b28b-6568aac097f5 with 2 users - testing yes_pass scenario...
  â³ Waiting for both users to reach voting-window...
  ğŸ‘† male user clicking "Pass" (respin), female user clicking "Yes"...
  ğŸ”˜ male user: Clicking Pass button...
  ğŸ”˜ female user: Clicking Yes button...
  âŒ Failed to click Pass for male user: locator.textContent: Timeout 30000ms exceeded.
Call log:
[2m  - waiting for locator('button').filter({ hasText: /pass|respin/i }).first()[22m

  âŒ Failed to click Yes for female user: locator.textContent: Timeout 30000ms exceeded.
Call log:
[2m  - waiting for locator('button').filter({ hasText: /yes/i }).first()[22m

  ğŸ“‹ Browser console messages: [0] ğŸ“¤ Sending vote: {matchId: 3b38cb3d-da08-4c4c-b28b-6568aac097f5, voteType: pass} | [1] ğŸ”˜ Yes button clicked {matchId: 3b38cb3d-da08-4c4c-b28b-6568aac097f5, userVote: null} | [1] ğŸ“¤ Sending vote: {matchId: 3b38cb3d-da08-4c4c-b28b-6568aac097f5, voteType: yes} | [0] ğŸ“¥ Vote response: {status: 200, ok: true, statusText: } | [0] ğŸ“¥ Vote response data: {message: Waiting for partner to vote, outcome: null, completed: false, debug_info: Object} | [0] â³ Waiting for partner to vote {message: Waiting for partner to vote, matchId: 3b38cb3d-da08-4c4c-b28b-6568aac097f5} | [0] ğŸ” Checking match outcome immediately after vote... {matchId: 3b38cb3d-da08-4c4c-b28b-6568aac097f5} | [1] ğŸ“¥ Vote response: {status: 200, ok: true, statusText: } | [1] ğŸ“¥ Vote response data: {outcome: yes_pass, completed: true} | [1] Match completed, auto-requeued {outcome: yes_pass} | [0] Polling found completed match with outcome: yes_pass redirecting to spinning | [0] ğŸ“Š Match outcome check result: {outcome: yes_pass, status: completed} | [0] Match completed with outcome: yes_pass | [1] âš ï¸ Real-time subscription error: user-state-4a9d84c9-6657-40ea-ae11-ffa6d1817223 | [1] âš ï¸ Real-time subscription error: user-state-4a9d84c9-6657-40ea-ae11-ffa6d1817223 | [0] âš ï¸ Real-time subscription error: user-state-e83bc467-e735-46e3-b20b-3ccfc36d0633 | [0] âš ï¸ Real-time subscription error: user-state-e83bc467-e735-46e3-b20b-3ccfc36d0633 | [0] ğŸ” Checking match outcome immediately after vote... {matchId: 3b38cb3d-da08-4c4c-b28b-6568aac097f5} | [1] Polling found completed match with outcome: yes_pass redirecting to spinning | [0] Polling found completed match with outcome: yes_pass redirecting to spinning | [0] ğŸ“Š Match outcome check result: {outcome: yes_pass, status: completed} | [0] Match completed with outcome: yes_pass | [0] ğŸ” Checking match outcome immediately after vote... {matchId: 3b38cb3d-da08-4c4c-b28b-6568aac097f5} | [0] ğŸ“Š Match outcome check result: {outcome: yes_pass, status: completed} | [0] Match completed with outcome: yes_pass
  â³ Waiting for both users to be auto-spun (redirected to /spinning) (30 seconds)...
  âœ… Both users auto-spun (redirected to /spinning)! (after 1000ms)

ğŸ“ˆ MATCH ANALYSIS:
Total users created: 2
Successfully signed in: 2
Matched users: 2
Unmatched users: 0
Total matches created: 1
Signed-in females: 1/1
Signed-in males: 1/1
Expected matches: 1 (one per signed-in female, limited by males)
âŒ Test failed: ReferenceError: matchedFemales is not defined
    at [90m/Users/bb/Desktop/speed/[39mtests/load-test-50males-20females.spec.ts:572:7
    at [90m/Users/bb/Desktop/speed/[39mnode_modules/[4mplaywright[24m/lib/worker/workerMain.js:322:9
    at [90m/Users/bb/Desktop/speed/[39mnode_modules/[4mplaywright[24m/lib/worker/testInfo.js:311:11
    at TimeoutManager.withRunnable [90m(/Users/bb/Desktop/speed/[39mnode_modules/[4mplaywright[24m/lib/worker/timeoutManager.js:67:14[90m)[39m
    at TestInfoImpl._runWithTimeout [90m(/Users/bb/Desktop/speed/[39mnode_modules/[4mplaywright[24m/lib/worker/testInfo.js:309:7[90m)[39m
    at [90m/Users/bb/Desktop/speed/[39mnode_modules/[4mplaywright[24m/lib/worker/workerMain.js:320:7
    at WorkerMain._runTest [90m(/Users/bb/Desktop/speed/[39mnode_modules/[4mplaywright[24m/lib/worker/workerMain.js:295:5[90m)[39m
    at WorkerMain.runTestGroup [90m(/Users/bb/Desktop/speed/[39mnode_modules/[4mplaywright[24m/lib/worker/workerMain.js:199:11[90m)[39m
    at process.<anonymous> [90m(/Users/bb/Desktop/speed/[39mnode_modules/[4mplaywright[24m/lib/common/process.js:65:22[90m)[39m
ğŸ§¹ Cleaning up test users...
Ã—[dotenv@17.2.3] injecting env (0) from .env.local -- tip: âš™ï¸  write to custom object with { processEnv: myObject }
(node:97317) Warning: The 'NO_COLOR' env is ignored due to the 'FORCE_COLOR' env being set.
(Use `node --trace-warnings ...` to show where the warning was created)
ğŸŒ Testing against: https://speed-silk.vercel.app
ğŸ‘¤ Creating 1 male users via backend...
âœ… All 1 male users created
ğŸ‘¤ Creating 1 female users via backend...
âœ… All 1 female users created
ğŸŒ Opening browser contexts for all users...
âœ… Created 2 browser contexts
ğŸ” Signing in all users (batched to avoid server overload)...
  Signing in batch 1/1 (2 users)...
  âœ… Batch 1 complete: 2/2 users signed in
âœ… Sign-in complete: 2/2 users successfully signed in
ğŸ° 2 users clicking Start Spin (in batches)...
  Batch 1/1: 2 users clicking Start Spin...
  âœ… Batch 1 complete
âœ… 2 users clicked Start Spin
â³ Waiting for matches to occur (45 seconds)...
ğŸ“Š Checking match status for all signed-in users...

ğŸ—³ï¸ Testing voting flow: One user votes "pass" (respin), other votes "yes"...
  Found match b61cdb0c-9fa4-4342-8b1d-6b737f928938 with 2 users - testing yes_pass scenario...
  â³ Waiting for both users to reach voting-window...
  ğŸ‘† male user clicking "Pass" (respin), female user clicking "Yes"...
  ğŸ”˜ male user: Clicking Pass button...
  ğŸ”˜ female user: Clicking Yes button...
