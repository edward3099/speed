

**THE 7 CORE SCENARIOS

these fully define your matching logic from start to finish**

these 7 scenarios describe all behaviour under
low traffic, medium traffic, high traffic, disconnects, passes, idles, requeues, and fairness.

if your backend satisfies these precisely, the system will work perfectly.

⸻

**scenario 1

three users start spinning at different times**

users

user a starts
user b starts 1 second later
user c starts 3 seconds later

expected behaviour
	1.	user a starts spinning alone
waiting
	2.	user b starts spinning
a and b are matched immediately
c is still spinning
	3.	user a and b see each other
countdown begins normally
both can vote
	4.	c continues spinning until someone else appears
c does not get stuck
c does not match himself
c does not match offline users

why this scenario matters
this proves the matching engine reacts in real time to new joiners
and does not rematch existing pairs incorrectly.

⸻

**scenario 2

user arrives after one person has been spinning for a long time**

users

user a spinning for 3 minutes
user b spins now

expected behaviour
	1.	user a should match user b immediately
because long waiting must always be respected
fairness is correctly working
	2.	neither user gets matched to anyone else first
	3.	countdown starts normally
	4.	both can vote normally

why this scenario matters
this proves fairness and priority work correctly.

⸻

**scenario 3

voting outcomes**

the following must always be true.

⸻

**case a

yes + yes**

expected
	•	pair accepted
	•	both go to video
	•	nobody goes back to spinning
	•	no requeue needed
	•	they will never match again in the future
	•	everything ends cleanly

⸻

**case b

yes + pass**

expected
	•	pair ends instantly
	•	yes user is rewarded with +10 boost
	•	both users automatically go back spinning
	•	no one presses spin
	•	these two will never match again in future

⸻

**case c

pass + pass**

expected
	•	pair ends instantly
	•	both users automatically go back spinning
	•	no boosts
	•	they will never match again

⸻

**case d

pass + idle**

expected
	•	pair ends
	•	pass user automatically goes spinning
	•	idle user must press spin manually
	•	no boosts
	•	they will never match again

⸻

**case e

yes + idle**

expected
	•	pair ends
	•	yes user automatically goes spinning with +10 boost
	•	idle user must press spin manually
	•	they will never match again

⸻

**case f

pass + disconnect**

expected
	•	same as pass + idle
	•	pass user auto spinning
	•	disconnected user returns later and must press spin manually

⸻

**case g

idle + idle**

expected
	•	countdown finishes
	•	nothing happens
	•	both must press spin again manually
	•	fair behaviour
	•	never match again

⸻

**scenario 4

disconnects during spinning or during countdown**

case a

disconnect during spinning
	•	user disappears
	•	they must never get matched
	•	they must be removed from spinning pool
	•	they must press spin again when they return

case b

disconnect during countdown
	•	pair ends instantly
	•	the remaining user follows the voting logic
if the remaining user pressed yes → auto spin with +10
if remaining user pressed pass → auto spin
if remaining user did nothing → nothing happens
	•	disconnected user must press spin manually when they return

case c

disconnect the moment the match forms
	•	the match must be cancelled
	•	the other user must instantly go back spinning
	•	disconnected user returns with no match

⸻

**scenario 5

high traffic: 200–500 spinning users**

expectations
	1.	no user waits forever
	2.	everyone eventually gets paired
	3.	users who wait longer get priority
	4.	matches form continuously every moment
	5.	two users never match twice in one session
	6.	offline users are never pulled into matches
	7.	passes do not freeze the system
	8.	idles do not freeze the system
	9.	disconnects do not freeze the system
	10.	the spin logic always keeps moving

this scenario ensures scaling behaviour under heavy traffic.

⸻

**scenario 6

multiple users join and leave at the same time**

users

a, b, c, d spinning
e joins
c leaves
f joins
b leaves
g joins

expected behaviour
	•	the system always keeps the remaining users spinning
	•	the system always pairs available users immediately
	•	arrivals immediately fill the gaps
	•	departures instantly free their partners
	•	nobody gets stuck
	•	nobody gets forgotten
	•	nobody gets paired with someone who is not spinning
	•	the order remains fair
	•	the matchmaking never breaks or freezes

this validates excellent concurrency handling.

⸻

**scenario 7

users who have matched before never match again**

this applies to all outcomes:
	•	yes + yes
	•	yes + pass
	•	pass + pass
	•	pass + idle
	•	yes + idle
	•	idle + idle
	•	pass + disconnect

expected behaviour
	1.	permanent history is stored
	2.	no scenario ever puts these two together again
	3.	history checking must be extremely fast
	4.	history must persist even if they disconnect
	5.	history blocks only that pair, not others

this prevents repeating matches and makes the system feel fresh.

