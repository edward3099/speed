
> speed-date@0.1.0 test
> playwright test tests/city-age-filtering.spec.ts

[dotenv@17.2.3] injecting env (6) from .env.local -- tip: ğŸ”„ add secrets lifecycle management: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env.local -- tip: âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }

Running 1 test using 1 worker
[dotenv@17.2.3] injecting env (0) from .env.local -- tip: ğŸ“¡ add observability to secrets: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env.local -- tip: ğŸ”‘ add access controls to secrets: https://dotenvx.com/ops
(node:96446) Warning: The 'NO_COLOR' env is ignored due to the 'FORCE_COLOR' env being set.
(Use `node --trace-warnings ...` to show where the warning was created)
ğŸŒ Testing against Vercel: https://speed-a5tevkyz0-eds-projects-934496ce.vercel.app
ğŸ‘¤ Creating test users with different city preferences and ages...
âœ… All test users created
âš™ï¸ Updating user profiles with ages...
âš™ï¸ Setting up user preferences via Supabase...
âœ… Preferences set
ğŸŒ Opening browser contexts and signing in users...
  âœ… Test Male London signed in
  âœ… Test Female London signed in
  âœ… Test Female North signed in
  âœ… Test Female Old signed in
  âœ… Test Female No City signed in
âš™ï¸ Setting preferences via UI...
ğŸ° All users clicking Start Spin simultaneously...
  âœ… Test Female No City clicked Start Spin
  âœ… Test Female Old clicked Start Spin
  âœ… Test Female London clicked Start Spin
  âœ… Test Male London clicked Start Spin
  âœ… Test Female North clicked Start Spin

ğŸ“Š Checking match results...
  Test Male London: https://speed-a5tevkyz0-eds-projects-934496ce.vercel.app/voting-window?matchId=57282f62-c5ed-4309-a638-9c662d862eac
  Test Female London: https://speed-a5tevkyz0-eds-projects-934496ce.vercel.app/voting-window?matchId=57282f62-c5ed-4309-a638-9c662d862eac
  Test Female North: https://speed-a5tevkyz0-eds-projects-934496ce.vercel.app/spinning
  Test Female Old: https://speed-a5tevkyz0-eds-projects-934496ce.vercel.app/spinning
  Test Female No City: https://speed-a5tevkyz0-eds-projects-934496ce.vercel.app/spin

ğŸ“ˆ MATCH ANALYSIS:
  âœ… Match 57282f62...:
     - Test Male London (male)
     - Test Female London (female)
     âœ… Valid match: Test Female London has overlapping cities or no city preference

ğŸ“Š TEST RESULTS:
Expected matches for User 1:
  âœ… User 2 (London overlap, age compatible)
  âœ… User 5 (no city preference, age compatible)
  âŒ User 3 (no city overlap)
  âŒ User 4 (age out of range)

ğŸ§¹ Cleaning up test users...
âœ… Cleanup complete
Â·
  1 passed (1.4m)
